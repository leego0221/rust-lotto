# Rust 로또 발매기

## 개요

러스트로 구현한 콘솔 기반 로또 발매기 프로그램입니다.

사용자가 로또 구입 금액을 입력하면 금액만큼 로또를 발행합니다. 이때 로또 번호를 '**전체 자동**' 또는 '**수동 포함**' 두 가지 방식 중 선택할 수 있습니다.

- '**전체 자동**' 모드를 선택하면 구매 개수만큼 자동 로또를 발행합니다.

- '**수동 포함**' 모드를 선택하면 구매 개수 내에서 몇 개를 수동 로또로 할지 정할 수 있습니다. 해당 개수만큼 수동 로또를 발매하고, 나머지는 자동 로또로 발행됩니다.

당첨 번호와 보너스 번호를 입력하면 각 로또의 등수를 계산하고, 구입 금액에 따른 수익률을 계산합니다.

각 단계마다 발행된 로또 번호와 당첨 내역, 수익률을 콘솔로 확인할 수 있습니다.

<br>

## 구현할 기능 목록

### 입력

- 구입 금액 입력
- 로또 번호 선택 모드 입력
- 수동 로또 포함 시, 수동 로또 개수와 각 로또 번호 입력
- 당첨 번호 입력
- 보너스 번호 입력

### 출력

- 구매 개수 출력
- 구매한 로또 리스트를 수동과 자동으로 분류하여 출력
- 구매한 로또 리스트 중 몇 개 일치했는지 출력
- 수익률 출력

### 기능

- 자동 번호 모드와 수동 번호 모드 선택하기
- 구입 금액만큼 수동 로또와 자동 로또를 구분하여 발행하기
- 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자 뽑기
- 번호 일치 여부에 따라 등수 매긴 뒤 내부에 저장하기
- 등수에 따라 당첨 금액을 부여하고, 총 구매 금액에 따른 수익률 계산하기

<br>

## 예외 케이스

### 전반적인 입력

- 공백 계열은 아닌지 검증
- `u32` 타입인지 검증
- 수동 로또 번호나 당첨 번호의 경우 쉼표 기준으로 잘 구분되는지 검증

### 구입 금액 입력

- 1,000원 이상인지 검증
- 1,000원 단위인지 검증

### 로또 번호 선택 모드 입력

- 전체 자동(`'a'`) 모드 또는 수동 포함(`'m'`) 모드인지 검증

### 수동 로또 개수 입력

- 개수가 1에서 총 구매 개수 사이인지 검증

### 수동 로또 번호 및 당첨 번호 입력

- 번호가 총 6개인지 검증
- 번호가 중복되지 않는지 검증
- 번호가 1에서 45 사이인지 검증

### 보너스 번호 입력

- 번호가 1에서 45 사이인지 검증
- 당첨 번호 6개와 중복되지 않는지 검증

### 잘못된 값 입력

- 예외 발생 및 그 부분부터 입력 다시 받기

<br>

## 실행 예시

### 정상 흐름 (1. 전체 자동 모드)

```
[로또 발매기] 프로그램에 오신 것을 환영합니다.

구입금액을 입력해 주세요.
5000

로또 번호는 '전체 자동' 또는 '수동 포함' 두 가지 방식 중 선택이 가능합니다.
원하는 방식을 선택해주세요. (a: 전체 자동, m: 수동 포함)
a

5개를 구매했습니다.
자동:  [12, 14, 21, 31, 36, 45]
자동:  [1, 16, 22, 33, 37, 38]
자동:  [1, 3, 7, 11, 17, 45]
자동:  [3, 14, 38, 40, 42, 43]
자동:  [3, 9, 10, 18, 21, 44]

당첨 번호를 입력해 주세요.
1, 2, 3, 5, 6, 7

보너스 번호를 입력해 주세요.
10

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 100.0%입니다.
```

<br>

### 정상 흐름 (2. 수동 포함 모드)

```
[로또 발매기] 프로그램에 오신 것을 환영합니다.

구입금액을 입력해 주세요.
5000

로또 번호는 '전체 자동' 또는 '수동 포함' 두 가지 방식 중 선택이 가능합니다.
원하는 방식을 선택해주세요. (a: 전체 자동, m: 수동 포함)
m

현재 총 5장의 로또를 구매할 수 있습니다.
이 중 몇 장의 로또를 수동 선택할지 입력해주세요.
2

1번째 수동 로또 번호를 입력해 주세요.
1, 2, 3, 4, 5, 6

2번째 수동 로또 번호를 입력해 주세요.
20, 18, 16, 14, 12, 10

5개를 구매했습니다.
수동:  [1, 2, 3, 4, 5, 6]
수동:  [10, 12, 14, 16, 18, 20]
자동:  [3, 5, 31, 36, 40, 41]
자동:  [6, 19, 20, 27, 43, 45]
자동:  [5, 10, 12, 14, 21, 26]

당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 0개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 1개
총 수익률은 40000000.0%입니다.
```

<br>

### 예외 흐름

**구입 금액**

```
구입금액을 입력해 주세요.
900
[ERROR] 구매 금액은 1000원 이상이어야 합니다. 다시 입력해주세요.

구입금액을 입력해 주세요.
1500
[ERROR] 구매 금액은 1000원 단위여야 합니다. 다시 입력해주세요.
```

<br>

**로또 번호 선택 모드**

```
로또 번호는 '전체 자동' 또는 '수동 포함' 두 가지 방식 중 선택이 가능합니다.
원하는 방식을 선택해주세요. (a: 전체 자동, m: 수동 포함)
y
[ERROR] 로또 번호 선택 모드는 a 또는 m이어야 합니다. 다시 입력해주세요.
```

<br>

**수동 로또 개수**

```
현재 총 5장의 로또를 구매할 수 있습니다.
이 중 몇 장의 로또를 수동 선택할지 입력해주세요.
0
[ERROR] 수동 선택 개수는 1에서 5 사이여야 합니다. 다시 입력해주세요.
```

<br>

**수동 로또 번호**

```
1번째 수동 로또 번호를 입력해 주세요.
1, 2, 3, 4, 5
[ERROR] 로또 번호는 6개여야 합니다. 다시 입력해주세요.

1번째 수동 로또 번호를 입력해 주세요.
1, 2, 3, 4, 5, 100
[ERROR] 로또 번호는 1에서 45 사이여야 합니다. 다시 입력해주세요.

1번째 수동 로또 번호를 입력해 주세요.
1, 2, 3, 4, 5, 5
[ERROR] 로또 번호 중 중복된 숫자가 있습니다. 다시 입력해주세요.
```

<br>

**당첨 번호**

```
당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5
[ERROR] 당첨 번호는 6개여야 합니다. 다시 입력해주세요.

당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 100
[ERROR] 당첨 번호는 1에서 45 사이여야 합니다. 다시 입력해주세요.

당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 5
[ERROR] 당첨 번호 중 중복된 숫자가 있습니다. 다시 입력해주세요.
```

<br>

**보너스 번호**

```
당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 6

보너스 번호를 입력해 주세요.
100
[ERROR] 보너스 번호는 1에서 45 사이여야 합니다. 다시 입력해주세요.

보너스 번호를 입력해 주세요.
5
[ERROR] 보너스 번호가 당첨 번호와 중복됩니다. 다시 입력해주세요.
```

<br>

## 프로젝트 실행 방법

### 1. 러스트 설치

Windows의 경우 아래 링크에서 환경에 맞는 rustup을 설치합니다.

> https://rust-lang.org/tools/install/

Linux나 MacOS의 경우 터미널 창에서 다음 명령어를 입력하여 rustup을 설치합니다.

```bash
$ curl https://sh.rustup.rs -sSf | sh -s
```

<br>

### 2. 러스트 설치 확인

터미널 창에서 러스트 버전이 정상적으로 출력되는지 확인합니다.

```bash
$ rustc --version
```

<br>

### 3. 리포지토리 복제

원하는 위치에 리포지토리를 복제한 뒤 프로젝트로 이동합니다.

```bash
$ git clone https://github.com/leego0221/rust-lotto.git
$ cd rust-lotto
```

<br>

### 4. 프로젝트 실행

rustup을 설치하면 `cargo`라는 러스트 빌드 시스템이 같이 설치됩니다. `cargo`를 통해 프로젝트를 빌드하고 실행시킵니다.

```bash
$ cargo run
```

<br>

### 5. 테스트 실행

`cargo`를 통해 테스트를 실행시킵니다. 테스트로는 domain, service, util에 대한 단위 테스트를 작성했습니다.

```bash
$ cargo test
```
